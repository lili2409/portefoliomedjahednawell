<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Veille - Nawell Medjahed</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        textarea {
            height: 100px;
            resize: vertical;
        }
        button {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        button:hover {
            background: #45a049;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background: #f2f2f2;
        }
        tr:hover {
            background: #f9f9f9;
        }
        .btn-delete {
            background: #f44336;
        }
        .btn-delete:hover {
            background: #d32f2f;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìù Admin Veille Documentaire - Nawell Medjahed</h1>
        
        <!-- Formulaire d'ajout -->
        <div class="form-section">
            <h2>Ajouter un article</h2>
            <form id="articleForm">
                <div class="form-group">
                    <label for="date">Date :</label>
                    <input type="date" id="date" required>
                </div>
                
                <div class="form-group">
                    <label for="titre">Titre :</label>
                    <input type="text" id="titre" required placeholder="Titre de l'article">
                </div>
                
                <div class="form-group">
                    <label for="source">Source :</label>
                    <input type="text" id="source" required placeholder="Journal, site web...">
                </div>
                
                <div class="form-group">
                    <label for="lien">Lien :</label>
                    <input type="url" id="lien" placeholder="https://...">
                </div>
                
                <div class="form-group">
                    <label for="outil">Outil utilis√© :</label>
                    <input type="text" id="outil" placeholder="PubMed, Google Scholar...">
                </div>
                
                <div class="form-group">
                    <label for="motscles">Mots-cl√©s :</label>
                    <input type="text" id="motscles" placeholder="robotique, IA, chirurgie" required>
                </div>
                
                <div class="form-group">
                    <label for="resume">R√©sum√© / Analyse :</label>
                    <textarea id="resume" required placeholder="R√©sum√© de l'article..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="pays">Pays :</label>
                    <input type="text" id="pays" placeholder="France, USA, International...">
                </div>
                
                <button type="submit">‚ûï Ajouter l'article</button>
                <button type="button" onclick="saveToFile()">üíæ Sauvegarder</button>
            </form>
        </div>
        
        <!-- Liste des articles -->
        <div class="list-section">
            <h2>Articles (8)</h2>
            <table id="articlesTable">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Titre</th>
                        <th>Source</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Les articles seront ajout√©s ici par JavaScript -->
                </tbody>
            </table>
            
            <div style="margin-top: 20px;">
                <button onclick="exportToJSON()">üì• Exporter en JSON</button>
                <button onclick="exportToCSV()">üìä Exporter en CSV</button>
                <button onclick="copyToClipboard()">üìã Copier pour Markdown</button>
            </div>
        </div>
    </div>

    <script>
        // Donn√©es initiales (bas√©es sur votre image)
        let articles = [
            {
                date: "2025-11-15",
                titre: "The rise of robotics and AI-assisted surgery in modern healthcare (review)",
                source: "PMC / Journal (review)",
                lien: "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC12181090/",
                outil: "PubMed / PMC",
                motscles: "robotique, IA, chirurgie assist√©e",
                resume: "Revue synth√©tisant 25 √©tudes 2024-2025 : adoption croissante de la chirurgie robotique assist√©e par IA; gains de pr√©cision et r√©duction des complications mais d√©fis HTA et co√ªt.",
                pays: "International"
            },
            {
                date: "2025-10-30",
                titre: "Comparable perioperative performance between three robotic systems for partial nephrectomy",
                source: "Scientific Reports (Nature group)",
                lien: "https://www.nature.com/articles/s41598-025-11434-8",
                outil: "Nature / Scientific Reports",
                motscles: "robotique chirurgicale, n√©phrectomie, da Vinci, √©valuation",
                resume: "√âtude prospective comparant syst√®mes robotiques (incluant da Vinci) : r√©sultats p√©ri-op√©ratoires comparables ‚Äî implication pour comp√©tition industrielle et choix d'h√¥pital.",
                pays: "Inde / International"
            },
            {
                date: "2025-10-05",
                titre: "A multi-perspective qualitative study on robotic-assisted surgery training and knowledge",
                source: "Scientific Reports",
                lien: "https://www.nature.com/articles/s41598-025-13323-6",
                outil: "Nature / enqu√™te qualitative",
                motscles: "formation, comp√©tences, chirurgie robotique",
                resume: "Analyse qualitative des besoins de formation en robotique chirurgicale ; souligne gap formation-s√©curit√© et n√©cessit√© de modules standardis√©s.",
                pays: "Royaume-Uni"
            }
        ];

        // Charger les articles au d√©marrage
        document.addEventListener('DOMContentLoaded', function() {
            displayArticles();
            // D√©finir la date d'aujourd'hui par d√©faut
            document.getElementById('date').valueAsDate = new Date();
        });

        // G√©rer l'ajout d'article
        document.getElementById('articleForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newArticle = {
                date: document.getElementById('date').value,
                titre: document.getElementById('titre').value,
                source: document.getElementById('source').value,
                lien: document.getElementById('lien').value,
                outil: document.getElementById('outil').value,
                motscles: document.getElementById('motscles').value,
                resume: document.getElementById('resume').value,
                pays: document.getElementById('pays').value || "International"
            };
            
            articles.push(newArticle);
            displayArticles();
            
            // R√©initialiser le formulaire
            this.reset();
            document.getElementById('date').valueAsDate = new Date();
            
            alert('Article ajout√© avec succ√®s !');
        });

        // Afficher les articles dans le tableau
        function displayArticles() {
            const tbody = document.querySelector('#articlesTable tbody');
            tbody.innerHTML = '';
            
            // Trier par date (r√©cent en premier)
            articles.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            articles.forEach((article, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${article.date}</td>
                    <td><strong>${article.titre}</strong></td>
                    <td>${article.source}</td>
                    <td>
                        <button onclick="editArticle(${index})">‚úèÔ∏è Modifier</button>
                        <button class="btn-delete" onclick="deleteArticle(${index})">üóëÔ∏è Supprimer</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            // Mettre √† jour le nombre d'articles
            document.querySelector('.list-section h2').textContent = `Articles (${articles.length})`;
        }

        // Supprimer un article
        function deleteArticle(index) {
            if (confirm('Voulez-vous vraiment supprimer cet article ?')) {
                articles.splice(index, 1);
                displayArticles();
                alert('Article supprim√© !');
            }
        }

        // Modifier un article
        function editArticle(index) {
            const article = articles[index];
            
            // Remplir le formulaire avec les donn√©es
            document.getElementById('date').value = article.date;
            document.getElementById('titre').value = article.titre;
            document.getElementById('source').value = article.source;
            document.getElementById('lien').value = article.lien;
            document.getElementById('outil').value = article.outil;
            document.getElementById('motscles').value = article.motscles;
            document.getElementById('resume').value = article.resume;
            document.getElementById('pays').value = article.pays;
            
            // Supprimer l'ancien article
            articles.splice(index, 1);
            displayArticles();
            
            alert('Modifiez l\'article dans le formulaire ci-dessus');
        }

        // Sauvegarder dans le localStorage (fonctionne imm√©diatement)
        function saveToFile() {
            localStorage.setItem('veilleData', JSON.stringify(articles));
            alert(`‚úÖ Donn√©es sauvegard√©es !\n${articles.length} articles stock√©s dans votre navigateur.`);
        }

        // Exporter en JSON
        function exportToJSON() {
            const dataStr = JSON.stringify(articles, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'veille-documentaire.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Exporter en CSV
        function exportToCSV() {
            let csv = 'Date,Titre,Source,Lien,Outil,Mots-cl√©s,R√©sum√©,Pays\n';
            
            articles.forEach(article => {
                const row = [
                    article.date,
                    `"${article.titre}"`,
                    `"${article.source}"`,
                    `"${article.lien}"`,
                    `"${article.outil}"`,
                    `"${article.motscles}"`,
                    `"${article.resume.replace(/"/g, '""')}"`,
                    `"${article.pays}"`
                ];
                csv += row.join(',') + '\n';
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'veille-documentaire.csv';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Copier au format Markdown (comme votre image)
        function copyToClipboard() {
            let markdown = '# Veille Documentaire ‚Äî Robotique M√©dicale\n\n';
            markdown += `## Derni√®re mise √† jour : ${new Date().toISOString().split('T')[0]}\n\n`;
            markdown += '| Date | Titre | Source | Lien | Outil utilis√© | Mots-cl√©s | R√©sum√© / Analyse | Pays |\n';
            markdown += '|---|---|---|---|---|---|---|---|\n';
            
            articles.forEach(article => {
                markdown += `| ${article.date} | ${article.titre} | ${article.source} | ${article.lien || ''} | ${article.outil || ''} | ${article.motscles} | ${article.resume} | ${article.pays} |\n`;
            });
            
            navigator.clipboard.writeText(markdown).then(() => {
                alert('‚úÖ Tableau copi√© au format Markdown !\nCollez-le dans votre document.');
            }).catch(err => {
                alert('Erreur : ' + err);
            });
        }

        // Charger les donn√©es sauvegard√©es si elles existent
        function loadSavedData() {
            const saved = localStorage.getItem('veilleData');
            if (saved) {
                articles = JSON.parse(saved);
                displayArticles();
                console.log('Donn√©es charg√©es depuis la sauvegarde locale');
            }
        }

        // Charger au d√©marrage
        loadSavedData();
    </script>
</body>
</html>
